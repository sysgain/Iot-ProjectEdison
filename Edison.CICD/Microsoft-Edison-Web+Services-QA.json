{
   "options":[
      {
         "enabled":false,
         "definition":{
            "id":"5d58cc01-7c75-450c-be18-a388ddb129ec"
         },
         "inputs":{
            "branchFilters":"[\"+refs/heads/*\"]",
            "additionalFields":"{}"
         }
      },
      {
         "enabled":false,
         "definition":{
            "id":"a9db38f9-9fdc-478c-b0f9-464221e58316"
         },
         "inputs":{
            "workItemType":"292",
            "assignToRequestor":"true",
            "additionalFields":"{}"
         }
      }
   ],
   "variables":{
      "githubpersonaltoken":{
         "value":null,
         "isSecret":true
      },
      "runkubernetes":{
         "value":"0"
      },
      "system.debug":{
         "value":"false",
         "allowOverride":true
      },
      "vststoken":{
         "value":null,
         "isSecret":true
      }
   },
   "retentionRules":[
      {
         "branches":[
            "+refs/heads/*"
         ],
         "artifacts":[

         ],
         "artifactTypesToDelete":[
            "FilePath",
            "SymbolStore"
         ],
         "daysToKeep":2,
         "minimumToKeep":1,
         "deleteBuildRecord":true,
         "deleteTestResults":true
      }
   ],
   "properties":{

   },
   "tags":[

   ],
   "_links":{
      "self":{
         "href":"https://dev.azure.com/BlueMetal/da75864f-0e90-4b2b-87c8-6790aaa76c56/_apis/build/Definitions/185?revision=19"
      },
      "web":{
         "href":"https://dev.azure.com/BlueMetal/da75864f-0e90-4b2b-87c8-6790aaa76c56/_build/definition?definitionId=185"
      },
      "editor":{
         "href":"https://dev.azure.com/BlueMetal/da75864f-0e90-4b2b-87c8-6790aaa76c56/_build/designer?id=185&_a=edit-build-definition"
      },
      "badge":{
         "href":"https://dev.azure.com/BlueMetal/da75864f-0e90-4b2b-87c8-6790aaa76c56/_apis/build/status/185"
      }
   },
   "jobAuthorizationScope":1,
   "jobTimeoutInMinutes":60,
   "jobCancelTimeoutInMinutes":5,
   "process":{
      "phases":[
         {
            "steps":[
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Build Services",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"6975e2d1-96d3-4afc-8a41-498b5d34ea19",
                     "versionSpec":"0.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "containerregistrytype":"Azure Container Registry",
                     "dockerRegistryEndpoint":"",
                     "azureSubscriptionEndpoint":"65230702-a7bb-4e59-bb46-7df24b4ac182",
                     "azureContainerRegistry":"{\"loginServer\":\"edisoncontainerregistry.azurecr.io\", \"id\" : \"/subscriptions/dbe50096-704b-42d6-a00d-3825bde8ab2d/resourceGroups/edison/providers/Microsoft.ContainerRegistry/registries/edisoncontainerregistry\"}",
                     "dockerComposeFile":"**/docker-compose-services.yml",
                     "additionalDockerComposeFiles":"",
                     "dockerComposeFileArgs":"",
                     "projectName":"$(Build.Repository.Name)",
                     "qualifyImageNames":"true",
                     "action":"Build services",
                     "additionalImageTags":"$(Build.BuildId)",
                     "includeSourceTags":"false",
                     "includeLatestTag":"true",
                     "buildImages":"true",
                     "serviceName":"",
                     "containerName":"",
                     "ports":"",
                     "workDir":"",
                     "entrypoint":"",
                     "containerCommand":"",
                     "detached":"true",
                     "abortOnContainerExit":"true",
                     "imageDigestComposeFile":"$(Build.StagingDirectory)/docker-compose.images.yml",
                     "removeBuildOptions":"false",
                     "baseResolveDirectory":"",
                     "outputDockerComposeFile":"$(Build.StagingDirectory)/docker-compose.yml",
                     "dockerComposeCommand":"",
                     "dockerHostEndpoint":"",
                     "nopIfNoDockerComposeFile":"false",
                     "requireAdditionalDockerComposeFiles":"false",
                     "cwd":"$(System.DefaultWorkingDirectory)"
                  }
               },
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Push Services",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"6975e2d1-96d3-4afc-8a41-498b5d34ea19",
                     "versionSpec":"0.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "containerregistrytype":"Azure Container Registry",
                     "dockerRegistryEndpoint":"",
                     "azureSubscriptionEndpoint":"65230702-a7bb-4e59-bb46-7df24b4ac182",
                     "azureContainerRegistry":"{\"loginServer\":\"edisoncontainerregistry.azurecr.io\", \"id\" : \"/subscriptions/dbe50096-704b-42d6-a00d-3825bde8ab2d/resourceGroups/edison/providers/Microsoft.ContainerRegistry/registries/edisoncontainerregistry\"}",
                     "dockerComposeFile":"**/docker-compose-services.yml",
                     "additionalDockerComposeFiles":"",
                     "dockerComposeFileArgs":"",
                     "projectName":"$(Build.Repository.Name)",
                     "qualifyImageNames":"true",
                     "action":"Push services",
                     "additionalImageTags":"$(Build.BuildId)",
                     "includeSourceTags":"false",
                     "includeLatestTag":"false",
                     "buildImages":"true",
                     "serviceName":"",
                     "containerName":"",
                     "ports":"",
                     "workDir":"",
                     "entrypoint":"",
                     "containerCommand":"",
                     "detached":"true",
                     "abortOnContainerExit":"true",
                     "imageDigestComposeFile":"$(Build.StagingDirectory)/docker-compose.images.yml",
                     "removeBuildOptions":"false",
                     "baseResolveDirectory":"",
                     "outputDockerComposeFile":"$(Build.StagingDirectory)/docker-compose.yml",
                     "dockerComposeCommand":"",
                     "dockerHostEndpoint":"",
                     "nopIfNoDockerComposeFile":"false",
                     "requireAdditionalDockerComposeFiles":"false",
                     "cwd":"$(System.DefaultWorkingDirectory)"
                  }
               },
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Lock Services",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"6975e2d1-96d3-4afc-8a41-498b5d34ea19",
                     "versionSpec":"0.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "containerregistrytype":"Azure Container Registry",
                     "dockerRegistryEndpoint":"",
                     "azureSubscriptionEndpoint":"65230702-a7bb-4e59-bb46-7df24b4ac182",
                     "azureContainerRegistry":"{\"loginServer\":\"edisoncontainerregistry.azurecr.io\", \"id\" : \"/subscriptions/dbe50096-704b-42d6-a00d-3825bde8ab2d/resourceGroups/edison/providers/Microsoft.ContainerRegistry/registries/edisoncontainerregistry\"}",
                     "dockerComposeFile":"**/docker-compose-services.yml",
                     "additionalDockerComposeFiles":"",
                     "dockerComposeFileArgs":"",
                     "projectName":"$(Build.Repository.Name)",
                     "qualifyImageNames":"true",
                     "action":"Lock services",
                     "additionalImageTags":"$(Build.BuildId)",
                     "includeSourceTags":"false",
                     "includeLatestTag":"false",
                     "buildImages":"true",
                     "serviceName":"",
                     "containerName":"",
                     "ports":"",
                     "workDir":"",
                     "entrypoint":"",
                     "containerCommand":"",
                     "detached":"true",
                     "abortOnContainerExit":"true",
                     "imageDigestComposeFile":"$(Build.StagingDirectory)/docker-compose.images.yml",
                     "removeBuildOptions":"false",
                     "baseResolveDirectory":"",
                     "outputDockerComposeFile":"$(Build.StagingDirectory)/docker-compose.yml",
                     "dockerComposeCommand":"",
                     "dockerHostEndpoint":"",
                     "nopIfNoDockerComposeFile":"false",
                     "requireAdditionalDockerComposeFiles":"false",
                     "cwd":"$(System.DefaultWorkingDirectory)"
                  }
               }
            ],
            "name":"Kubernetes",
            "refName":"Phase_2",
            "condition":"succeeded()",
            "target":{
               "executionOptions":{
                  "type":0
               },
               "allowScriptsAuthAccessOption":false,
               "type":1
            },
            "jobAuthorizationScope":1,
            "jobCancelTimeoutInMinutes":1
         },
         {
            "steps":[
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Build Services",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"6975e2d1-96d3-4afc-8a41-498b5d34ea19",
                     "versionSpec":"0.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "containerregistrytype":"Azure Container Registry",
                     "dockerRegistryEndpoint":"",
                     "azureSubscriptionEndpoint":"65230702-a7bb-4e59-bb46-7df24b4ac182",
                     "azureContainerRegistry":"{\"loginServer\":\"edisoncontainerregistry.azurecr.io\", \"id\" : \"/subscriptions/dbe50096-704b-42d6-a00d-3825bde8ab2d/resourceGroups/edison/providers/Microsoft.ContainerRegistry/registries/edisoncontainerregistry\"}",
                     "dockerComposeFile":"**/docker-compose-admin-qa.yml",
                     "additionalDockerComposeFiles":"",
                     "dockerComposeFileArgs":"",
                     "projectName":"$(Build.Repository.Name)",
                     "qualifyImageNames":"true",
                     "action":"Build services",
                     "additionalImageTags":"$(Build.BuildId)",
                     "includeSourceTags":"false",
                     "includeLatestTag":"true",
                     "buildImages":"true",
                     "serviceName":"",
                     "containerName":"",
                     "ports":"",
                     "workDir":"",
                     "entrypoint":"",
                     "containerCommand":"",
                     "detached":"true",
                     "abortOnContainerExit":"true",
                     "imageDigestComposeFile":"$(Build.StagingDirectory)/docker-compose.images.yml",
                     "removeBuildOptions":"false",
                     "baseResolveDirectory":"",
                     "outputDockerComposeFile":"$(Build.StagingDirectory)/docker-compose.yml",
                     "dockerComposeCommand":"",
                     "dockerHostEndpoint":"",
                     "nopIfNoDockerComposeFile":"false",
                     "requireAdditionalDockerComposeFiles":"false",
                     "cwd":"$(System.DefaultWorkingDirectory)"
                  }
               },
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Push Services",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"6975e2d1-96d3-4afc-8a41-498b5d34ea19",
                     "versionSpec":"0.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "containerregistrytype":"Azure Container Registry",
                     "dockerRegistryEndpoint":"",
                     "azureSubscriptionEndpoint":"65230702-a7bb-4e59-bb46-7df24b4ac182",
                     "azureContainerRegistry":"{\"loginServer\":\"edisoncontainerregistry.azurecr.io\", \"id\" : \"/subscriptions/dbe50096-704b-42d6-a00d-3825bde8ab2d/resourceGroups/edison/providers/Microsoft.ContainerRegistry/registries/edisoncontainerregistry\"}",
                     "dockerComposeFile":"**/docker-compose-admin-qa.yml",
                     "additionalDockerComposeFiles":"",
                     "dockerComposeFileArgs":"",
                     "projectName":"$(Build.Repository.Name)",
                     "qualifyImageNames":"true",
                     "action":"Push services",
                     "additionalImageTags":"$(Build.BuildId)",
                     "includeSourceTags":"false",
                     "includeLatestTag":"false",
                     "buildImages":"true",
                     "serviceName":"",
                     "containerName":"",
                     "ports":"",
                     "workDir":"",
                     "entrypoint":"",
                     "containerCommand":"",
                     "detached":"true",
                     "abortOnContainerExit":"true",
                     "imageDigestComposeFile":"$(Build.StagingDirectory)/docker-compose.images.yml",
                     "removeBuildOptions":"false",
                     "baseResolveDirectory":"",
                     "outputDockerComposeFile":"$(Build.StagingDirectory)/docker-compose.yml",
                     "dockerComposeCommand":"",
                     "dockerHostEndpoint":"",
                     "nopIfNoDockerComposeFile":"false",
                     "requireAdditionalDockerComposeFiles":"false",
                     "cwd":"$(System.DefaultWorkingDirectory)"
                  }
               },
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Lock Services",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"6975e2d1-96d3-4afc-8a41-498b5d34ea19",
                     "versionSpec":"0.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "containerregistrytype":"Azure Container Registry",
                     "dockerRegistryEndpoint":"",
                     "azureSubscriptionEndpoint":"65230702-a7bb-4e59-bb46-7df24b4ac182",
                     "azureContainerRegistry":"{\"loginServer\":\"edisoncontainerregistry.azurecr.io\", \"id\" : \"/subscriptions/dbe50096-704b-42d6-a00d-3825bde8ab2d/resourceGroups/edison/providers/Microsoft.ContainerRegistry/registries/edisoncontainerregistry\"}",
                     "dockerComposeFile":"**/docker-compose-admin-qa.yml",
                     "additionalDockerComposeFiles":"",
                     "dockerComposeFileArgs":"",
                     "projectName":"$(Build.Repository.Name)",
                     "qualifyImageNames":"true",
                     "action":"Lock services",
                     "additionalImageTags":"$(Build.BuildId)",
                     "includeSourceTags":"false",
                     "includeLatestTag":"false",
                     "buildImages":"true",
                     "serviceName":"",
                     "containerName":"",
                     "ports":"",
                     "workDir":"",
                     "entrypoint":"",
                     "containerCommand":"",
                     "detached":"true",
                     "abortOnContainerExit":"true",
                     "imageDigestComposeFile":"$(Build.StagingDirectory)/docker-compose.images.yml",
                     "removeBuildOptions":"false",
                     "baseResolveDirectory":"",
                     "outputDockerComposeFile":"$(Build.StagingDirectory)/docker-compose.yml",
                     "dockerComposeCommand":"",
                     "dockerHostEndpoint":"",
                     "nopIfNoDockerComposeFile":"false",
                     "requireAdditionalDockerComposeFiles":"false",
                     "cwd":"$(System.DefaultWorkingDirectory)"
                  }
               },
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Copy Files to: $(build.artifactstagingdirectory)",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c",
                     "versionSpec":"2.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "SourceFolder":"Edison.Web/Kubernetes/qa/Deployment",
                     "Contents":"*.yaml",
                     "TargetFolder":"$(build.artifactstagingdirectory)",
                     "CleanTargetFolder":"false",
                     "OverWrite":"false",
                     "flattenFolders":"false"
                  }
               },
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Copy Config Files to: $(build.artifactstagingdirectory)",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"5bfb729a-a7c8-4a78-a7c3-8d717bb7c13c",
                     "versionSpec":"2.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "SourceFolder":"Edison.Web/Kubernetes/qa/Config",
                     "Contents":"*.json",
                     "TargetFolder":"$(build.artifactstagingdirectory)",
                     "CleanTargetFolder":"false",
                     "OverWrite":"false",
                     "flattenFolders":"false"
                  }
               },
               {
                  "environment":{

                  },
                  "enabled":true,
                  "continueOnError":false,
                  "alwaysRun":false,
                  "displayName":"Publish Artifact: drop",
                  "timeoutInMinutes":0,
                  "condition":"succeeded()",
                  "task":{
                     "id":"2ff763a7-ce83-4e1f-bc89-0ae63477cebe",
                     "versionSpec":"1.*",
                     "definitionType":"task"
                  },
                  "inputs":{
                     "PathtoPublish":"$(Build.ArtifactStagingDirectory)",
                     "ArtifactName":"drop",
                     "ArtifactType":"Container",
                     "TargetPath":"",
                     "Parallel":"false",
                     "ParallelCount":"8"
                  }
               }
            ],
            "name":"Kubernetes Admin",
            "refName":"Phase_1",
            "condition":"succeeded()",
            "target":{
               "executionOptions":{
                  "type":0
               },
               "allowScriptsAuthAccessOption":false,
               "type":1
            },
            "jobAuthorizationScope":1,
            "jobCancelTimeoutInMinutes":1
         }
      ],
      "type":1
   },
   "repository":{
      "properties":{
         "cleanOptions":"0",
         "labelSources":"0",
         "labelSourcesFormat":"$(build.buildNumber)",
         "reportBuildStatus":"true",
         "gitLfsSupport":"false",
         "skipSyncSource":"false",
         "checkoutNestedSubmodules":"false",
         "fetchDepth":"0"
      },
      "id":"a4184f35-5ee3-47d6-81b6-18a957df9ac9",
      "type":"TfsGit",
      "name":"ProjectEdison",
      "url":"https://BlueMetal@dev.azure.com/BlueMetal/Microsoft/_git/ProjectEdison",
      "defaultBranch":"refs/heads/master",
      "clean":"false",
      "checkoutSubmodules":false
   },
   "processParameters":{

   },
   "quality":1,
   "authoredBy":{
      "displayName":"Ben Kotvis",
      "url":"https://app.vssps.visualstudio.com/Aa9b5d529-8ef0-42dc-8c8c-1cfdeed4e478/_apis/Identities/1437e2ba-a44c-65d5-afa7-e58351217b49",
      "_links":{
         "avatar":{
            "href":"https://dev.azure.com/BlueMetal/_apis/GraphProfile/MemberAvatars/aad.MTQzN2UyYmEtYTQ0Yy03NWQ1LWFmYTctZTU4MzUxMjE3YjQ5"
         }
      },
      "id":"1437e2ba-a44c-65d5-afa7-e58351217b49",
      "uniqueName":"Ben.Kotvis@insight.com",
      "imageUrl":"https://dev.azure.com/BlueMetal/_api/_common/identityImage?id=1437e2ba-a44c-65d5-afa7-e58351217b49",
      "descriptor":"aad.MTQzN2UyYmEtYTQ0Yy03NWQ1LWFmYTctZTU4MzUxMjE3YjQ5"
   },
   "drafts":[

   ],
   "queue":{
      "_links":{
         "self":{
            "href":"https://dev.azure.com/BlueMetal/_apis/build/Queues/66"
         }
      },
      "id":66,
      "name":"Hosted Linux Preview",
      "url":"https://dev.azure.com/BlueMetal/_apis/build/Queues/66",
      "pool":{
         "id":9,
         "name":"Hosted Linux Preview",
         "isHosted":true
      }
   },
   "id":185,
   "name":"Microsoft-Edison-Web+Services-QA",
   "url":"https://dev.azure.com/BlueMetal/da75864f-0e90-4b2b-87c8-6790aaa76c56/_apis/build/Definitions/185?revision=19",
   "uri":"vstfs:///Build/Definition/185",
   "path":"\\Edison",
   "type":2,
   "queueStatus":0,
   "revision":19,
   "createdDate":"2018-11-14T14:21:35.307Z",
   "project":{
      "id":"da75864f-0e90-4b2b-87c8-6790aaa76c56",
      "name":"Microsoft",
      "description":"Projects done for Microsoft",
      "url":"https://dev.azure.com/BlueMetal/_apis/projects/da75864f-0e90-4b2b-87c8-6790aaa76c56",
      "state":1,
      "revision":409394818,
      "visibility":"private"
   }
}